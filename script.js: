// Function to handle file upload
document.getElementById('photo').addEventListener('change', function () {
    const photoInput = this;
    if (photoInput.files.length === 0) {
        return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
        const photo = {
            url: e.target.result,
            caption: "Ugly Pic", // Default caption
        };

        // Save photo to local storage
        const photos = JSON.parse(localStorage.getItem('photos')) || [];
        photos.push(photo);
        localStorage.setItem('photos', JSON.stringify(photos));

        // Show the gallery after uploading
        showGallery();
    };

    reader.readAsDataURL(photoInput.files[0]);
});

// Function to show the photo gallery
function showGallery() {
    // Clear upload section
    document.getElementById('uploadContainer').style.display = 'none';
    const gallery = document.getElementById('photoGallery');
    gallery.innerHTML = ''; // Clear the gallery

    const photos = JSON.parse(localStorage.getItem('photos')) || [];
    photos.forEach(photo => addPhotoToGallery(photo));

    gallery.style.display = 'grid';
    gallery.style.opacity = 1; // Fade in the gallery
}

// Function to add photo to the gallery
function addPhotoToGallery(photo) {
    const gallery = document.getElementById('photoGallery');

    const photoPanel = document.createElement('div');
    photoPanel.classList.add('photo-panel', 'fade-in');

    const imgElement = document.createElement('img');
    imgElement.src = photo.url;

    const caption = document.createElement('div');
    caption.classList.add('caption');
    caption.innerText = photo.caption;

    photoPanel.appendChild(imgElement);
    photoPanel.appendChild(caption);

    gallery.appendChild(photoPanel);
}

// Show gallery button event listener
document.getElementById('showGalleryButton').addEventListener('click', showGallery);
