let selectedPhoto;

// Handle file selection
document.getElementById('photo').addEventListener('change', function () {
    const photoInput = this;
    if (photoInput.files.length === 0) {
        return; // Exit if no file is selected
    }

    const reader = new FileReader();
    reader.onload = function (e) {
        selectedPhoto = {
            url: e.target.result,
            caption: "Ugly Pic", // Default caption
        };

        showPopup("Do you want to upload this picture to the website?");
    };

    reader.readAsDataURL(photoInput.files[0]);
});

// Show confirmation popup
function showPopup(message) {
    document.getElementById('popupMessage').innerText = message;
    document.getElementById('overlay').style.display = 'flex';
}

// Confirm upload
document.getElementById('confirmUpload').addEventListener('click', function () {
    // Instead of uploading, just confirm and show the gallery
    showGallery();
});

// Cancel upload
document.getElementById('cancelUpload').addEventListener('click', function () {
    document.getElementById('overlay').style.display = 'none';
});

// Show gallery
function showGallery() {
    // Clear the upload container
    document.getElementById('uploadContainer').style.opacity = 0; // Fade out
    document.getElementById('uploadContainer').style.transition = 'opacity 0.5s ease';
    
    // Wait for fade-out to complete
    setTimeout(() => {
        document.getElementById('uploadContainer').style.display = 'none'; // Hide the upload container
        
        const gallery = document.getElementById('photoGallery');
        gallery.innerHTML = ''; // Clear previous photos

        // Create a photo panel for the uploaded photo
        const photoPanel = document.createElement('div');
        photoPanel.classList.add('photo-panel');

        const imgElement = document.createElement('img');
        imgElement.src = selectedPhoto.url;

        const caption = document.createElement('div');
        caption.classList.add('caption');
        caption.innerText = selectedPhoto.caption;

        photoPanel.appendChild(imgElement);
        photoPanel.appendChild(caption);
        gallery.appendChild(photoPanel);

        // Fade-in effect for gallery
        gallery.style.display = 'grid';
        gallery.style.opacity = 0;
        setTimeout(() => {
            gallery.style.opacity = 1;
            gallery.querySelectorAll('.photo-panel').forEach((panel, index) => {
                panel.style.opacity = 1;
                panel.style.transitionDelay = `${index * 0.1}s`;
            });
        }, 100);
    }, 500); // Wait for fade out to complete
}

// Show gallery button event listener
document.getElementById('showGalleryButton').addEventListener('click', showGallery);
